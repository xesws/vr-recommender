<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµè§ˆå™¨è¿æ¥é—®é¢˜ - è§£å†³æŒ‡å—</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            background: #f5f7fa;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        h1 {
            color: #e74c3c;
            border-bottom: 3px solid #e74c3c;
            padding-bottom: 15px;
        }
        h2 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 4px solid #667eea;
        }
        .alert {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #c3e6cb;
        }
        .alert-error {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #f5c6cb;
        }
        .alert-warning {
            background: #fff3cd;
            color: #856404;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #ffeaa7;
        }
        .solution-box {
            background: #f8f9fa;
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .solution-box h3 {
            color: #28a745;
            margin-top: 0;
        }
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }
        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .code {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .browser-test {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        #connectionResult {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ æµè§ˆå™¨è¿æ¥é—®é¢˜è§£å†³æŒ‡å—</h1>

        <div class="alert">
            <strong>âœ… å¥½æ¶ˆæ¯:</strong> ä½ çš„ Flask API å®Œå…¨æ­£å¸¸è¿è¡Œï¼<br>
            â€¢ å¥åº·æ£€æŸ¥: æˆåŠŸ<br>
            â€¢ èŠå¤© API: æˆåŠŸ<br>
            â€¢ é—®é¢˜å‡ºåœ¨æµè§ˆå™¨ç«¯
        </div>

        <div class="alert-error">
            <strong>âŒ é—®é¢˜ç°è±¡:</strong><br>
            "127.0.0.1 æ‹’ç»äº†æˆ‘ä»¬çš„è¿æ¥è¯·æ±‚"<br>
            <strong>âœ… å®é™…æƒ…å†µ:</strong> API æœåŠ¡å™¨è¿è¡Œæ­£å¸¸ï¼Œè¿™æ˜¯æµè§ˆå™¨é—®é¢˜
        </div>

        <h2>ğŸš€ ç«‹å³è§£å†³æ–¹æ¡ˆ (æŒ‰é¡ºåºå°è¯•)</h2>

        <div class="solution-box">
            <h3>æ–¹æ¡ˆ 1: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜ (æ¨è)</h3>
            <ol>
                <li><strong>Safari:</strong> Safari â†’ åå¥½è®¾ç½® â†’ é«˜çº§ â†’ ç®¡ç†ç½‘ç«™æ•°æ® â†’ æœç´¢ "localhost" â†’ åˆ é™¤</li>
                <li><strong>Chrome:</strong> è®¾ç½® â†’ éšç§å’Œå®‰å…¨ â†’ æ¸…é™¤æµè§ˆæ•°æ® â†’ æ¸…é™¤ç¼“å­˜</li>
                <li><strong>Firefox:</strong> è®¾ç½® â†’ éšç§ä¸å®‰å…¨ â†’ æ¸…é™¤æ•°æ®</li>
                <li><strong>Edge:</strong> è®¾ç½® â†’ éšç§ã€æœç´¢å’ŒæœåŠ¡ â†’ æ¸…é™¤æµè§ˆæ•°æ®</li>
            </ol>
            <p>ç„¶åé‡æ–°è®¿é—®: <a href="http://127.0.0.1:5001" class="btn">http://127.0.0.1:5001</a></p>
        </div>

        <div class="solution-box">
            <h3>æ–¹æ¡ˆ 2: ç¡¬åˆ·æ–° (Ctrl/Cmd + Shift + R)</h3>
            <p>åœ¨æµè§ˆå™¨ä¸­æŒ‰: <strong>Ctrl + Shift + R</strong> (Windows/Linux) æˆ– <strong>Cmd + Shift + R</strong> (Mac)</p>
        </div>

        <div class="solution-box">
            <h3>æ–¹æ¡ˆ 3: ä½¿ç”¨éšç§/æ— ç—•æ¨¡å¼</h3>
            <ul>
                <li><strong>Safari:</strong> æ–‡ä»¶ â†’ æ–°å»ºæ— ç—•æµè§ˆçª—å£</li>
                <li><strong>Chrome:</strong> Ctrl + Shift + N</li>
                <li><strong>Firefox:</strong> Ctrl + Shift + P</li>
            </ul>
            <p>ç„¶åè®¿é—®: <a href="http://127.0.0.1:5001" class="btn">http://127.0.0.1:5001</a></p>
        </div>

        <div class="solution-box">
            <h3>æ–¹æ¡ˆ 4: å°è¯•ä¸åŒæµè§ˆå™¨</h3>
            <p>å¦‚æœ Chrome ä¸è¡Œï¼Œè¯•è¯• Safariã€Firefox æˆ– Edge</p>
        </div>

        <div class="solution-box">
            <h3>æ–¹æ¡ˆ 5: æ£€æŸ¥ä»£ç†è®¾ç½®</h3>
            <ol>
                <li>æ£€æŸ¥ç³»ç»Ÿä»£ç†è®¾ç½®: ç³»ç»Ÿåå¥½è®¾ç½® â†’ ç½‘ç»œ â†’ é«˜çº§ â†’ ä»£ç†</li>
                <li>ç¡®ä¿æ²¡æœ‰å¯ç”¨ HTTP/HTTPS ä»£ç†</li>
                <li>æˆ–å°è¯•å…³é—­ä»£ç†åé‡è¯•</li>
            </ol>
        </div>

        <h2>ğŸŒ å¤‡ç”¨è®¿é—®æ–¹æ³•</h2>

        <div class="solution-box">
            <h3>æ–¹æ³• A: ä½¿ç”¨ç«¯å£ 5000</h3>
            <p>å°è¯•è®¿é—®: <a href="http://127.0.0.1:5000" class="btn">http://127.0.0.1:5000</a></p>
        </div>

        <div class="solution-box">
            <h3>æ–¹æ³• B: ä½¿ç”¨æµ‹è¯•é¡µé¢</h3>
            <p><a href="http://127.0.0.1:8000/test_access.html" class="btn btn-success">æ‰“å¼€æµ‹è¯•é¡µé¢</a></p>
            <p>è¿™ä¸ªé¡µé¢ä¼šæ˜¾ç¤º API è¿æ¥çŠ¶æ€å’Œæä¾›æµ‹è¯•åŠŸèƒ½</p>
        </div>

        <div class="solution-box">
            <h3>æ–¹æ³• C: ä½¿ç”¨ curl å‘½ä»¤æµ‹è¯•</h3>
            <p>æ‰“å¼€ç»ˆç«¯è¿è¡Œ:</p>
            <div class="code">curl http://127.0.0.1:5001/health</div>
            <p>å¦‚æœè¿”å› <code>{"status":"healthy","recommender":"ready"}</code>ï¼Œè¯´æ˜ API æ­£å¸¸</p>
        </div>

        <h2>ğŸ§ª åœ¨çº¿æµ‹è¯•</h2>

        <div class="browser-test">
            <h3>ç‚¹å‡»æŒ‰é’®æµ‹è¯•è¿æ¥:</h3>
            <button class="btn" onclick="testConnection()">æµ‹è¯•è¿æ¥</button>
            <div id="connectionResult">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
        </div>

        <h2>ğŸ“Š ç³»ç»ŸçŠ¶æ€</h2>

        <div class="alert">
            <strong>âœ… å½“å‰ç³»ç»ŸçŠ¶æ€:</strong><br>
            â€¢ Neo4j: è¿è¡Œä¸­ (ç«¯å£ 7474, 7687)<br>
            â€¢ Flask API: è¿è¡Œä¸­ (ç«¯å£ 5000, 5001)<br>
            â€¢ Python: 3.9.12<br>
            â€¢ æ‰€æœ‰ä¾èµ–: å·²å®‰è£…
        </div>

        <h2>ğŸ”§ ç»ˆæè§£å†³æ–¹æ¡ˆ</h2>

        <div class="alert-warning">
            <strong>å¦‚æœä»¥ä¸Šéƒ½ä¸è¡Œ:</strong>
            <ol>
                <li>é‡å¯ Flask æœåŠ¡: <code>./restart.sh</code></li>
                <li>é‡å¯æµè§ˆå™¨</li>
                <li>é‡å¯ç”µè„‘ç½‘ç»œè®¾ç½®: ç³»ç»Ÿåå¥½è®¾ç½® â†’ ç½‘ç»œ â†’ é«˜çº§ â†’ TCP/IP â†’ ç»­è®¢ DHCP ç§Ÿçº¦</li>
                <li>ä½¿ç”¨å…¶ä»–è®¾å¤‡è®¿é—® (åŒä¸€ç½‘ç»œä¸‹çš„æ‰‹æœº/å¹³æ¿)</li>
            </ol>
        </div>

        <h2>ğŸ“ è·å–å¸®åŠ©</h2>

        <p>å¦‚æœé—®é¢˜ä¾ç„¶å­˜åœ¨:</p>
        <ul>
            <li>è¿è¡Œ: <code>./diagnose.sh</code> æŸ¥çœ‹è¯¦ç»†è¯Šæ–­</li>
            <li>æŸ¥çœ‹: <a href="FAQ.html" class="btn">FAQ é¡µé¢</a></li>
            <li>å°è¯•: <code>curl -v http://127.0.0.1:5001/health</code> åœ¨ç»ˆç«¯æµ‹è¯•</li>
        </ul>

        <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #eee; text-align: center; color: #999;">
            <p>VR Recommender System - RAG-Powered Learning Platform</p>
        </div>
    </div>

    <script>
        async function testConnection() {
            const resultDiv = document.getElementById('connectionResult');
            resultDiv.textContent = 'æ­£åœ¨æµ‹è¯•è¿æ¥...';

            try {
                const response = await fetch('http://127.0.0.1:5001/health');
                const data = await response.json();

                if (response.ok) {
                    resultDiv.innerHTML = '<div style="color: green; font-weight: bold;">âœ… è¿æ¥æˆåŠŸï¼</div>' +
                                         '<div style="margin-top: 10px;">' +
                                         '<strong>å“åº”:</strong><br>' +
                                         '<pre style="background: #f0f0f0; padding: 10px; border-radius: 5px;">' +
                                         JSON.stringify(data, null, 2) +
                                         '</pre></div>' +
                                         '<p style="color: green; margin-top: 10px;">âœ“ API å·¥ä½œæ­£å¸¸ï¼Œè¯·å°è¯•é‡æ–°åŠ è½½èŠå¤©é¡µé¢</p>';
                } else {
                    resultDiv.innerHTML = '<div style="color: orange; font-weight: bold;">âš  è¿æ¥å¼‚å¸¸</div>' +
                                         '<pre>' + JSON.stringify(data, null, 2) + '</pre>';
                }
            } catch (error) {
                resultDiv.innerHTML = '<div style="color: red; font-weight: bold;">âŒ è¿æ¥å¤±è´¥</div>' +
                                     '<p><strong>é”™è¯¯:</strong> ' + error.message + '</p>' +
                                     '<p>è¯·æ£€æŸ¥é˜²ç«å¢™è®¾ç½®æˆ–å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜</p>';
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = function() {
            setTimeout(testConnection, 500);
        };
    </script>
</body>
</html>
