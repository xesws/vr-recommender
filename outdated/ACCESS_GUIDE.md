# ğŸ”§ è®¿é—®é—®é¢˜è¯Šæ–­ä¸è§£å†³æŒ‡å—

## âœ… ç³»ç»ŸçŠ¶æ€æ£€æŸ¥

ä½ çš„ç³»ç»Ÿå½“å‰çŠ¶æ€ï¼š
- âœ… Neo4j: è¿è¡Œä¸­ (ç«¯å£ 7474, 7687)
- âœ… Flask API: è¿è¡Œä¸­ (ç«¯å£ 5001)
- âœ… æ¨èåŠŸèƒ½: æ­£å¸¸å·¥ä½œ

## ğŸ§ª æµ‹è¯• API è¿æ¥

### æ–¹æ³• 1: å‘½ä»¤è¡Œæµ‹è¯•
```bash
# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://127.0.0.1:5001/health

# æµ‹è¯•æ¨èåŠŸèƒ½
curl -X POST http://127.0.0.1:5001/chat \
  -H 'Content-Type: application/json' \
  -d '{"message": "Python programming projects"}'
```

### æ–¹æ³• 2: æµè§ˆå™¨æµ‹è¯•
è®¿é—®æµ‹è¯•é¡µé¢ï¼š
```
http://localhost:8000/test_access.html
```

è¿™ä¸ªé¡µé¢ä¼šï¼š
- âœ… è‡ªåŠ¨æ£€æŸ¥ API è¿æ¥çŠ¶æ€
- âœ… æä¾›äº¤äº’å¼æµ‹è¯•ç•Œé¢
- âœ… æ˜¾ç¤ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

## ğŸ” å¦‚æœä½ é‡åˆ° "æ‹’ç»è®¿é—®" é”™è¯¯

### å¯èƒ½åŸå› å’Œè§£å†³æ–¹æ¡ˆ

#### 1. **ä½¿ç”¨ 127.0.0.1 è€Œä¸æ˜¯ localhost**
```bash
# âŒ å¤±è´¥
curl http://localhost:5001/health

# âœ… æˆåŠŸ
curl http://127.0.0.1:5001/health
```

#### 2. **ç¡®ä¿ Flask ç»‘å®šåˆ°æ‰€æœ‰æ¥å£**
æ£€æŸ¥ `flask_api.py` ä¸­çš„è¿è¡Œé…ç½®ï¼š
```python
app.run(host="0.0.0.0", port=5001, debug=False)
```
- `host="0.0.0.0"` - ç»‘å®šåˆ°æ‰€æœ‰ç½‘ç»œæ¥å£
- `host="127.0.0.1"` - åªç»‘å®šæœ¬åœ°å›ç¯

#### 3. **æ£€æŸ¥é˜²ç«å¢™è®¾ç½®**
```bash
# macOS
sudo pfctl -s info  # æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€

# å¦‚æœéœ€è¦ï¼Œå…è®¸ç«¯å£ 5001
sudo pfctl -f /etc/pf.conf
```

#### 4. **é‡å¯æœåŠ¡**
```bash
# å®Œå…¨é‡å¯
./restart.sh

# æˆ–æ‰‹åŠ¨é‡å¯
./stop_all.sh
sleep 2
./start_services.sh
```

## ğŸ“ è®¿é—®åœ°å€æ¸…å•

| æœåŠ¡ | åœ°å€ | ç”¨é€” |
|------|------|------|
| **Flask API (ä¸»)** | http://127.0.0.1:5001 | æ¨è API |
| **Flask API (å¤‡)** | http://127.0.0.1:5000 | å¤‡é€‰ç«¯å£ |
| **Neo4j Web UI** | http://127.0.0.1:7474 | æ•°æ®åº“ç®¡ç† |
| **æµ‹è¯•é¡µé¢** | http://127.0.0.1:8000/test_access.html | è¿æ¥æµ‹è¯• |

## ğŸ› ï¸ å®Œæ•´è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1: æ£€æŸ¥æœåŠ¡çŠ¶æ€
```bash
./status.sh
```

### æ­¥éª¤ 2: æ£€æŸ¥ç«¯å£å ç”¨
```bash
./check_ports.sh
```

### æ­¥éª¤ 3: æŸ¥çœ‹ Flask æ—¥å¿—
```bash
# å¦‚æœè¿è¡Œåœ¨åå°
tail -f logs/flask_api.log

# æˆ–ç›´æ¥æŸ¥çœ‹
cat flask_5001.log
```

### æ­¥éª¤ 4: éªŒè¯ API å“åº”
```bash
# ç®€å•å¥åº·æ£€æŸ¥
curl -v http://127.0.0.1:5001/health

# æµ‹è¯•æ¨è
curl -X POST http://127.0.0.1:5001/chat \
  -H 'Content-Type: application/json' \
  -d '{"message": "data visualization"}'
```

## ğŸ¯ æˆåŠŸæ¡ˆä¾‹

å½“å‰ç³»ç»Ÿæµ‹è¯•ç»“æœï¼š
```bash
$ curl -X POST http://127.0.0.1:5001/chat \
    -H 'Content-Type: application/json' \
    -d '{"message": "Python programming projects"}'

# å“åº”:
{
    "response": "Based on your interest in **Python programming projects**, ...",
    "type": "success"
}
```

âœ… **ç³»ç»Ÿå®Œå…¨æ­£å¸¸å·¥ä½œï¼**

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æ€»æ˜¯ä½¿ç”¨ 127.0.0.1** è€Œä¸æ˜¯ localhost
2. **å…ˆè¿è¡Œ `./status.sh`** æ£€æŸ¥çŠ¶æ€
3. **å¦‚æœæœ‰é—®é¢˜ï¼Œè¿è¡Œ `./restart.sh`**
4. **ä½¿ç”¨æµ‹è¯•é¡µé¢** http://127.0.0.1:8000/test_access.html
5. **æŸ¥çœ‹æ—¥å¿—** å¦‚æœéœ€è¦è°ƒè¯•

## ğŸš¨ å¸¸è§é”™è¯¯åŠè§£å†³

### é”™è¯¯: "Connection refused"
**åŸå› **: Flask API æœªè¿è¡Œ
**è§£å†³**: `./start_services.sh`

### é”™è¯¯: "Address already in use"
**åŸå› **: ç«¯å£è¢«å ç”¨
**è§£å†³**: `./restart.sh`

### é”™è¯¯: "Permission denied"
**åŸå› **: ç«¯å£ < 1024 éœ€è¦ root æƒé™
**è§£å†³**: ä½¿ç”¨ç«¯å£ > 1024 (å¦‚ 5000, 5001)

### é”™è¯¯: "No response"
**åŸå› **: ç½‘ç»œé—®é¢˜æˆ–é˜²ç«å¢™
**è§£å†³**: æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼Œä½¿ç”¨ 127.0.0.1

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»ç„¶é‡åˆ°é—®é¢˜ï¼š

1. è¿è¡Œ `./status.sh` å¹¶æŸ¥çœ‹è¾“å‡º
2. è¿è¡Œ `./check_ports.sh` æ£€æŸ¥ç«¯å£
3. è®¿é—®æµ‹è¯•é¡µé¢æŸ¥çœ‹è¯¦ç»†é”™è¯¯
4. æŸ¥çœ‹ Flask æ—¥å¿—: `tail -f flask_5001.log`

---

**æ€»ç»“**: ä½ çš„ç³»ç»Ÿè¿è¡Œæ­£å¸¸ï¼ä½¿ç”¨ `http://127.0.0.1:5001` è®¿é—®ï¼Œæˆ–è®¿é—® `http://127.0.0.1:8000/test_access.html` è¿›è¡Œæµ‹è¯•ã€‚
